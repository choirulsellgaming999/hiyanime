const data = [
    {
        title: "jujutsu kaisen",
        src: "https://i.postimg.cc/bNQ4kDP0/Screenshot-20240922-220634-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten1.html" 
    },
    {
        title: "Boku Ni Harem Sefri Ga Dekita Riyuu",
        src: "https://i.postimg.cc/8zSwtKbK/Screenshot-20240922-230753-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten2.html" 
    },
    {
        title: "anime hentai",
        src: "https://i.postimg.cc/yNp4N7Cm/Screenshot-20240922-233635-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten3.html" 
    },
    {
        title: "blue archive",
        src: "https://i.postimg.cc/j5JntXbC/Screenshot-20241006-093620-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten5.html" 
    },
    {
        title: "blue archive",
        src: "https://i.postimg.cc/k5VLLXgW/Screenshot-20241006-094355-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten6.html" 
    },
    {
        title: "demon slayer kimetsu no yaiba",
        src: "https://i.postimg.cc/sDnwQpPK/Screenshot-20240923-120823-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten4.html" 
    },
    {
        title: "Mano Sakuragi Doggy Idol Master Animation 3D",
        src: "https://i.postimg.cc/pV1RXFB8/Screenshot-20241006-181542-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten7.html" 
    },
    {
        title: "Blue Archive",
        src: "https://i.postimg.cc/y6JYRjxn/Screenshot-20241006-182041-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten8.html" 
    },
    {
        title: "anime hentai",
        src: "https://i.postimg.cc/sXMypfj1/Screenshot-20241006-182338-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten9.html" 
    },
    {
        title: "anime hentai",
        src: "https://i.postimg.cc/bJkfMMtw/Screenshot-20241006-233917-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten10.html" 
    },
    {
        title: "Otome wa Boku ni Koishiteru",
        src: "https://i.postimg.cc/MZdSVbcP/Screenshot-20241007-121710-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten11.html" 
    },
    {
        title: "Boku ni Sefure ga Dekita Riyuu",
        src: "https://i.postimg.cc/NM7t0FPZ/Screenshot-20241007-123721-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten12.html" 
    },
    {
        title: "Gotoubun no Hanayome",
        src: "https://i.postimg.cc/LsLL1rzw/Screenshot-20241010-151620-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten13.html" 
    },
    {
        title: "Kotowari Kimi no Kokoro no Koboreta Kakera",
        src: "https://i.postimg.cc/jdF87ssS/Screenshot-20241010-215946-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten14.html" 
    },
    {
        title: "Shishunki No Obenkyou",
        src: "https://i.postimg.cc/2yXxhwNK/Screenshot-20241010-215927-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten15.html" 
    },
    {
        title: "overlord",
        src: "https://i.postimg.cc/SR7Wt2ff/Screenshot-20241027-171645-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten16.html" 
    },
    {
        title: "overlord",
        src: "https://i.postimg.cc/dtX8wwyr/Screenshot-20241027-172458-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten17.html" 
    },
    {
        title: "overlord",
        src: "https://i.postimg.cc/CxfsbhzX/Screenshot-20241027-235533-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten18.html" 
    },
    {
        title: "overlord",
        src: "https://i.postimg.cc/KzY3Fb3J/overlord-1.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten19.html" 
    },
    {
        title: "overlord",
        src: "https://i.postimg.cc/3N4y4ZBG/overlord-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten20.html" 
    },
    {
        title: "overlord",
        src: "https://i.postimg.cc/9MQFTYdy/overlord-3.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten21.html" 
    },
    {
        title: "overlord",
        src: "https://i.postimg.cc/d3zqbMz9/overlord-4.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten22.html" 
    },
    {
        title: "forger spy x family",
        src: "https://i.postimg.cc/T3jR44Qr/forger-spy-x-family-1.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten23.html" 
    },
    {
        title: "forger spy x family",
        src: "https://i.postimg.cc/FKDh9kMz/forger-spy-x-family-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten24.html" 
    },
    {
        title: "forger spy x family",
        src: "https://i.postimg.cc/1XNScCfV/forger-spy-x-family-3.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten25.html" 
    },
    {
        title: "forger spy x family",
        src: "https://i.postimg.cc/wxtRG9NL/forger-spy-x-family-4.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten26.html" 
    },
    {
        title: "Ijiranaide",
        src: "https://i.postimg.cc/W3sRL5tq/Ijiranaide-1.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten27.html" 
    },
    {
        title: "Ijiranaide",
        src: "https://i.postimg.cc/2Sx1ZypR/Ijiranaide-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten28.html" 
    },
    {
        title: "Ijiranaide",
        src: "https://i.postimg.cc/hGPfbngJ/Ijiranaide-3.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten29.html" 
    },
    {
        title: "Blue Archive",
        src: "https://i.postimg.cc/FHnQ8X3k/Screenshot-20241028-084505-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten30.html" 
    },
    {
        title: "Blue Archive",
        src: "https://i.postimg.cc/s2kCfPnV/Screenshot-20241028-084511-2.png", 
        link: "https://choirulsellgaming999.github.io/hiyanime/konten/konten31.html" 
    },
];

function displayResults(results, query) {
    const resultsContainer = document.getElementById('searchResults');
    resultsContainer.innerHTML = ''; 
    
    const statusMessage = document.createElement('p');
    statusMessage.className = 'status-message';

    if (results.length === 0) {
        statusMessage.textContent = 'Tidak ada hasil yg ditemukan.';
        resultsContainer.appendChild(statusMessage);
    } else {
        statusMessage.textContent = `Hasil Yang Tersedia untuk: ${query}`;
        resultsContainer.appendChild(statusMessage);
        
        results.forEach(result => {
            const resultItem = document.createElement('div');
            resultItem.className = 'result-item';
            resultItem.innerHTML = `
                <a href="${result.link}" class="image-link">
                    <img src="${result.src}" alt="${result.title}" class="result-image">
                    <p class="result-title">${result.title}</p>
                </a>
            `;
            resultsContainer.appendChild(resultItem);
        });
    }
}

function handleSearch(event) {
    event.preventDefault();
    const query = document.getElementById('searchInput').value.toLowerCase().trim();
    
    if (query.length < 2) { 
        const resultsContainer = document.getElementById('searchResults');
        resultsContainer.innerHTML = ''; 
        return; 
    }
    
    const results = data.filter(item => {
        const title = item.title.toLowerCase();
        const queryWords = query.split(' ');
        return queryWords.every(word => title.includes(word));
    });

    displayResults(results, query);
    updateSearchHistory(query); 
    document.getElementById('searchHistory').style.display = 'none'; 
}

function updateSearchHistory(query) {
    if (query && !searchHistory.includes(query)) {
        searchHistory.push(query);
        localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
    }

    const historyContainer = document.getElementById('searchHistory');
    historyContainer.innerHTML = '<h3>Search History:</h3>';

    const historyList = document.createElement('ul');
    searchHistory.forEach(item => {
        const listItem = document.createElement('li');
        listItem.textContent = item;
        listItem.addEventListener('click', () => {
            document.getElementById('searchInput').value = item;
            handleSearch(new Event('submit'));
        });
        historyList.appendChild(listItem);
    });

    historyContainer.appendChild(historyList);
}

document.getElementById('searchForm').addEventListener('submit', handleSearch);

function goback() {
    window.history.back();
}

document.getElementById('searchInput').addEventListener('input', () => {
    const historyContainer = document.getElementById('searchHistory');
    if (document.getElementById('searchInput').value) {
        historyContainer.style.display = 'block';
    } else {
        historyContainer.style.display = 'none';
    }
});

document.addEventListener('DOMContentLoaded', () => {
    updateSearchHistory('');
});
